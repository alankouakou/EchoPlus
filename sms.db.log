/*C21*/SET SCHEMA PUBLIC
\u000a    drop table group_contact if exists
\u000a    drop table groupe if exists
\u000a    drop table person if exists
\u000a    drop table refill_request if exists
\u000a    drop table request_status if exists
\u000a    drop table response_details if exists
\u000a    drop table role if exists
\u000a    drop table sms_info if exists
\u000a    drop table user if exists
\u000a    create table group_contact (\u000a        person_id bigint not null,\u000a        group_id bigint not null\u000a    )
\u000a    create table groupe (\u000a        id bigint generated by default as identity (start with 1),\u000a        name varchar(255),\u000a        account varchar(255),\u000a        primary key (id)\u000a    )
\u000a    create table person (\u000a        id bigint generated by default as identity (start with 1),\u000a        contact varchar(255),\u000a        first_name varchar(255),\u000a        last_name varchar(255),\u000a        account varchar(255),\u000a        primary key (id)\u000a    )
\u000a    create table refill_request (\u000a        id bigint generated by default as identity (start with 1),\u000a        credit integer not null,\u000a        date_created timestamp,\u000a        status_id bigint,\u000a        user_id varchar(255),\u000a        primary key (id)\u000a    )
\u000a    create table request_status (\u000a        id bigint generated by default as identity (start with 1),\u000a        name varchar(255),\u000a        primary key (id)\u000a    )
\u000a    create table response_details (\u000a        id bigint generated by default as identity (start with 1),\u000a        message_count integer,\u000a        message_id varchar(255),\u000a        recipient varchar(255),\u000a        sender varchar(255),\u000a        sent_at timestamp,\u000a        status varchar(255),\u000a        primary key (id)\u000a    )
\u000a    create table role (\u000a        id bigint generated by default as identity (start with 1),\u000a        description varchar(255),\u000a        name varchar(255) not null,\u000a        primary key (id)\u000a    )
\u000a    create table sms_info (\u000a        id bigint generated by default as identity (start with 1),\u000a        created_at timestamp,\u000a        message_id varchar(255),\u000a        user_username varchar(255),\u000a        primary key (id)\u000a    )
\u000a    create table user (\u000a        username varchar(255) not null,\u000a        balance integer not null,\u000a        email varchar(255) not null,\u000a        enabled boolean,\u000a        first_name varchar(255),\u000a        last_name varchar(255),\u000a        password varchar(255) not null,\u000a        sender_name varchar(11),\u000a        status varchar(255),\u000a        role_id bigint,\u000a        primary key (username)\u000a    )
\u000a    alter table group_contact \u000a        add constraint FK3w2b158ghcye9revn06532625 \u000a        foreign key (group_id) \u000a        references groupe
\u000a    alter table group_contact \u000a        add constraint FK8dibof4otd19g16wd1y04bge7 \u000a        foreign key (person_id) \u000a        references person
\u000a    alter table groupe \u000a        add constraint FKgddlg7fw72cu4pvmicokl9l3b \u000a        foreign key (account) \u000a        references user
\u000a    alter table person \u000a        add constraint FKniuvoegdsp6toja16jjdpqchn \u000a        foreign key (account) \u000a        references user
\u000a    alter table refill_request \u000a        add constraint FKhmcgpk8i7yy32vsks3kttnsxf \u000a        foreign key (status_id) \u000a        references request_status
\u000a    alter table refill_request \u000a        add constraint FKkjamc5c6k3j6cnh1duloj9673 \u000a        foreign key (user_id) \u000a        references user
\u000a    alter table sms_info \u000a        add constraint FKg5lbptnhu89l9iqh61lshtkfj \u000a        foreign key (user_username) \u000a        references user
\u000a    alter table user \u000a        add constraint FKn82ha3ccdebhokx3a8fgdqeyy \u000a        foreign key (role_id) \u000a        references role
INSERT INTO ROLE VALUES(1,'Administrateur','ROLE_ADMIN')
COMMIT
INSERT INTO ROLE VALUES(2,'Utilisateur','ROLE_USER')
COMMIT
INSERT INTO USER VALUES('user',10,'user@mail.com',FALSE,'Invit\u00e9',NULL,'$2a$10$ePO6mZQ0ZFfewpi4ZDUmXeujwyqAbXnTi1U.9uI2HSyc/GqCHq1y6','Invit\u00e9','disabled',2)
COMMIT
INSERT INTO GROUPE VALUES(1,'Aucun Contact','user')
COMMIT
INSERT INTO USER VALUES('admin',50,'admin@mail.com',TRUE,'Administrateur',NULL,'$2a$10$ujm4UvyZejrPUieCHGA9H./96s5oT/Q19Ai8Z2R4oNU13HZrGkR2y','Admin','disabled',1)
COMMIT
INSERT INTO GROUPE VALUES(2,'Tous les contacts','admin')
COMMIT
INSERT INTO REQUEST_STATUS VALUES(1,'NEW')
INSERT INTO REQUEST_STATUS VALUES(2,'CANCELLED')
INSERT INTO REQUEST_STATUS VALUES(3,'REJECTED')
INSERT INTO REQUEST_STATUS VALUES(4,'RECHARGED')
COMMIT
INSERT INTO USER VALUES('charles',0,'tbg_charles@yahoo.fr',TRUE,'Charles','TOA BI','$2a$10$28YZUT9tFToRiwwxGwKs.OEXJSWYOpPFcgedYcIJEQm1ZOJWVHY6.','secretaire','disabled',2)
COMMIT
DELETE FROM USER WHERE USERNAME='charles'
INSERT INTO USER VALUES('charles',0,'tbg_charles@yahoo.fr',FALSE,'Charles','TOA BI','$2a$10$28YZUT9tFToRiwwxGwKs.OEXJSWYOpPFcgedYcIJEQm1ZOJWVHY6.','secretaire','disabled',2)
COMMIT
DELETE FROM USER WHERE USERNAME='user'
INSERT INTO USER VALUES('user',10,'user@mail.com',TRUE,'Invit\u00e9',NULL,'$2a$10$ePO6mZQ0ZFfewpi4ZDUmXeujwyqAbXnTi1U.9uI2HSyc/GqCHq1y6','Invit\u00e9','disabled',2)
COMMIT
DELETE FROM USER WHERE USERNAME='user'
INSERT INTO USER VALUES('user',10,'user@mail.com',FALSE,'Invit\u00e9',NULL,'$2a$10$ePO6mZQ0ZFfewpi4ZDUmXeujwyqAbXnTi1U.9uI2HSyc/GqCHq1y6','Invit\u00e9','disabled',2)
COMMIT
DELETE FROM USER WHERE USERNAME='charles'
INSERT INTO USER VALUES('charles',0,'tbg_charles@yahoo.fr',TRUE,'Charles','TOA BI','$2a$10$28YZUT9tFToRiwwxGwKs.OEXJSWYOpPFcgedYcIJEQm1ZOJWVHY6.','secretaire','disabled',2)
COMMIT
